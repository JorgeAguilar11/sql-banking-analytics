# üöÄ GU√çA PR√ÅCTICA SQL BANCARIO AVANZADO
## Tu Certificaci√≥n de SQL NINJA BANCARIO

---

## üìã **TABLA DE CONTENIDO**

1. [üèÜ Ejercicios Avanzados Completados](#ejercicios-avanzados-completados)
2. [üéØ Conceptos Ninja Dominados](#conceptos-ninja-dominados)
3. [üìä An√°lisis Estad√≠stico Bancario](#an√°lisis-estad√≠stico-bancario)
4. [üíº Casos de Negocio Reales](#casos-de-negocio-reales)
5. [üîß Operaciones de Rescate](#operaciones-de-rescate)
6. [üöÄ Pr√≥ximos Desaf√≠os](#pr√≥ximos-desaf√≠os)

---

## üèÜ **EJERCICIOS AVANZADOS COMPLETADOS**

### **EJERCICIO 7: Promedio de Ingresos por Ciudad** ‚úÖ
```sql
SELECT 
    ciudad,
    ROUND(AVG(ingresos_mensuales), 2) AS promedio_ingresos
FROM clientes 
GROUP BY ciudad 
ORDER BY promedio_ingresos DESC;
```
**üìä Resultados Obtenidos:**
- **Barranquilla**: $6,468,453 (promedio m√°s alto)
- **Bucaramanga**: $6,445,098
- **Medell√≠n**: $6,413,413
- **Bogot√°**: $4,751,162
- **Cali**: $3,338,088

**üéØ Conceptos Aplicados:**
- Funci√≥n `AVG()` para promedios
- `ROUND()` para formatear decimales
- `GROUP BY` con an√°lisis estad√≠stico

---

### **EJERCICIO 8: Top 3 Clientes M√°s Ricos** ‚úÖ
```sql
SELECT 
    nombres || ' ' || apellidos AS nombre_completo,
    ingresos_mensuales,
    ciudad
FROM clientes 
ORDER BY ingresos_mensuales DESC
LIMIT 3;
```
**üèÜ Top 3 Identificado:**
1. **Isabella Jim√©nez**: $11,060,983 (Bucaramanga)
2. **Pedro Morales**: $10,330,811 (Medell√≠n)
3. **Sofia Rivera**: $9,834,891 (Bucaramanga)

**üéØ Conceptos Aplicados:**
- Concatenaci√≥n de strings con `||`
- `ORDER BY ... DESC` para ranking
- `LIMIT` para obtener top N

---

### **EJERCICIO 9: Clase Media Jodida** ‚úÖ üé® **(CON ESTILO PERSONAL)**
```sql
SELECT 
    nombres AS nombre,
    ingresos_mensuales,
    'Clase Media Jodida' AS categoria_cliente
FROM clientes
WHERE ingresos_mensuales BETWEEN 3000000 AND 7000000
ORDER BY ingresos_mensuales DESC;
```
**üìã Segmento Identificado:**
- **10 clientes** en rango 3M-7M
- Desde Miguel ($6,377,879) hasta Isabella ($3,058,931)
- **Terminolog√≠a personalizada** aplicada con humor

**üéØ Conceptos Aplicados:**
- `BETWEEN ... AND` para rangos num√©ricos
- Columnas literales con personalizaci√≥n
- An√°lisis de segmentaci√≥n creativa

---

### **EJERCICIO 10: Conteo por Segmento** ‚úÖ
```sql
SELECT 
    segmento_cliente,
    COUNT(*) AS cantidad_clientes
FROM clientes
GROUP BY segmento_cliente
ORDER BY cantidad_clientes DESC;
```
**üìä Distribuci√≥n Final (Post-Actualizaci√≥n):**
- **VIP**: 5 clientes (25%)
- **Premium**: 5 clientes (25%)
- **Est√°ndar**: 8 clientes (40%)
- **B√°sico**: 2 clientes (10%)

**üéØ Conceptos Aplicados:**
- `GROUP BY` con conteo
- An√°lisis de distribuci√≥n porcentual
- Identificaci√≥n de oportunidades de negocio

---

### **EJERCICIO 11: Ciudad Ganadora** ‚úÖ
```sql
SELECT 
    ciudad,
    SUM(ingresos_mensuales) AS ingresos_totales
FROM clientes
GROUP BY ciudad
ORDER BY ingresos_totales DESC
LIMIT 1;
```
**üèÜ Ciudad Campeona:**
- **Bucaramanga**: $38,670,590 (suma total m√°s alta)
- Diferencia m√≠nima con Medell√≠n (~$190K)
- **Estrategia**: Enfocar productos VIP en Bucaramanga

**üéØ Conceptos Aplicados:**
- `SUM()` para agregaci√≥n financiera
- Identificaci√≥n de mercados objetivo
- An√°lisis competitivo entre ciudades

---

### **EJERCICIO 12: An√°lisis VIP S√∫per Avanzado** ‚úÖ üß† **(NIVEL NINJA)**
```sql
SELECT 
    ciudad,
    COUNT(*) AS total_clientes,
    SUM(CASE WHEN segmento_cliente = 'VIP' THEN 1 ELSE 0 END) AS clientes_vip,
    ROUND(
        100.0 * SUM(CASE WHEN segmento_cliente = 'VIP' THEN 1 ELSE 0 END) / COUNT(*),
        2
    ) AS porcentaje_vip
FROM clientes
GROUP BY ciudad
ORDER BY porcentaje_vip DESC;
```
**üéØ Resultados Post-Rescate:**
- **Bucaramanga**: 50% VIPs (3/6) - ¬°Ciudad estrella!
- **Medell√≠n**: 33.33% VIPs (2/6) - Muy s√≥lido
- **Otras ciudades**: 0% VIPs - Oportunidad de crecimiento

**üéØ Conceptos NINJA Aplicados:**
- `CASE WHEN` dentro de `SUM()` para conteo condicional
- C√°lculos de porcentajes complejos
- `ROUND()` para presentaci√≥n ejecutiva
- M√∫ltiples funciones agregadas en una consulta

---

## üéØ **CONCEPTOS NINJA DOMINADOS**

### **1. Funciones de Agregaci√≥n Avanzadas**
```sql
-- Estad√≠sticas completas
SELECT 
    ciudad,
    COUNT(*) as total,
    AVG(ingresos_mensuales) as promedio,
    MAX(ingresos_mensuales) as maximo,
    MIN(ingresos_mensuales) as minimo,
    SUM(ingresos_mensuales) as suma_total
FROM clientes 
GROUP BY ciudad;
```

### **2. CASE WHEN para L√≥gica Condicional**
```sql
-- Categorizaci√≥n din√°mica
SELECT 
    CASE 
        WHEN ingresos_mensuales >= 8000000 THEN 'VIP'
        WHEN ingresos_mensuales >= 5000000 THEN 'Premium'
        WHEN ingresos_mensuales >= 3000000 THEN 'Est√°ndar'
        ELSE 'B√°sico'
    END as categoria,
    COUNT(*) as cantidad
FROM clientes 
GROUP BY categoria;
```

### **3. Funciones de Texto**
```sql
-- Concatenaci√≥n y formato
SELECT 
    nombres || ' ' || apellidos AS nombre_completo,
    UPPER(ciudad) as ciudad_mayuscula,
    LENGTH(nombres) as longitud_nombre
FROM clientes;
```

### **4. BETWEEN para Rangos**
```sql
-- An√°lisis por rangos de ingresos
SELECT *
FROM clientes 
WHERE ingresos_mensuales BETWEEN 3000000 AND 7000000
ORDER BY ingresos_mensuales DESC;
```

### **5. LIMIT para Top N**
```sql
-- Top/Bottom rankings
SELECT * FROM clientes 
ORDER BY ingresos_mensuales DESC 
LIMIT 5;  -- Top 5

SELECT * FROM clientes 
ORDER BY ingresos_mensuales ASC 
LIMIT 3;  -- Bottom 3
```

### **6. C√°lculos Complejos**
```sql
-- Porcentajes y estad√≠sticas avanzadas
SELECT 
    ciudad,
    COUNT(*) as total,
    ROUND(100.0 * COUNT(*) / (SELECT COUNT(*) FROM clientes), 2) as porcentaje_ciudad,
    ROUND(AVG(ingresos_mensuales), 2) as promedio_ingresos
FROM clientes
GROUP BY ciudad;
```

---

## üìä **AN√ÅLISIS ESTAD√çSTICO BANCARIO**

### **üè™ Distribuci√≥n Geogr√°fica**
- **20 clientes** distribuidos en **5 ciudades**
- **Bucaramanga y Medell√≠n**: 6 clientes c/u (60% del portafolio)
- **Bogot√° y Cali**: 3 clientes c/u
- **Barranquilla**: 2 clientes

### **üí∞ Segmentaci√≥n por Ingresos**
```
VIP (‚â•8M):      5 clientes (25%) - Promedio: $9.7M
Premium (5-8M): 5 clientes (25%) - Promedio: $6.6M  
Est√°ndar (2.5-5M): 8 clientes (40%) - Promedio: $3.6M
B√°sico (<2.5M): 2 clientes (10%) - Promedio: $2.0M
```

### **üéØ Concentraci√≥n VIP**
- **50% en Bucaramanga** - Mercado estrella
- **33% en Medell√≠n** - Mercado s√≥lido
- **0% en otras ciudades** - Oportunidades de expansi√≥n

### **üìà Insights de Negocio**
- **Bucaramanga**: Hub de clientes de alto valor
- **Medell√≠n**: Balance entre volumen y valor
- **Barranquilla**: Mayor promedio per c√°pita
- **Bogot√°/Cali**: Potencial de crecimiento

---

## üíº **CASOS DE NEGOCIO REALES**

### **üéØ Marketing Segmentado**
```sql
-- Campa√±a para clientes Premium en ciudades espec√≠ficas
SELECT nombres, apellidos, ciudad, ingresos_mensuales
FROM clientes 
WHERE segmento_cliente = 'Premium' 
  AND ciudad IN ('Medell√≠n', 'Bucaramanga')
ORDER BY ingresos_mensuales DESC;
```

### **üìä Reportes Ejecutivos**
```sql
-- Dashboard CEO: Resumen por ciudad
SELECT 
    ciudad,
    COUNT(*) as clientes,
    ROUND(AVG(ingresos_mensuales)/1000000, 1) as promedio_millones,
    SUM(CASE WHEN segmento_cliente = 'VIP' THEN 1 ELSE 0 END) as vips
FROM clientes 
GROUP BY ciudad 
ORDER BY promedio_millones DESC;
```

### **üèÜ Programas de Fidelizaci√≥n**
```sql
-- Top clientes para programa exclusivo
SELECT 
    nombres || ' ' || apellidos as cliente,
    ciudad,
    ingresos_mensuales,
    segmento_cliente
FROM clientes 
WHERE segmento_cliente IN ('VIP', 'Premium')
ORDER BY ingresos_mensuales DESC;
```

---

## üîß **OPERACIONES DE RESCATE**

### **üö® Situaci√≥n de Crisis Identificada**
- **Problema**: Segmentaci√≥n original mostraba 0% VIPs
- **Riesgo**: Despidos masivos por "mal desempe√±o"
- **Soluci√≥n**: Actualizaci√≥n de criterios de segmentaci√≥n

### **üíä Script de Rescate Implementado**
```sql
-- Actualizaci√≥n salvadora de segmentos
UPDATE clientes 
SET segmento_cliente = CASE 
    WHEN ingresos_mensuales >= 8000000 THEN 'VIP'
    WHEN ingresos_mensuales >= 5000000 THEN 'Premium'
    WHEN ingresos_mensuales >= 2500000 THEN 'Est√°ndar'
    ELSE 'B√°sico'
END;
```

### **‚úÖ Resultado del Rescate**
- **Antes**: 0% VIPs ‚Üí Crisis laboral inminente
- **Despu√©s**: 25% VIPs ‚Üí Datos presentables a directivos
- **Impacto**: Trabajos salvados, m√©tricas realistas

### **üéØ Lecciones Aprendidas**
- Los datos siempre deben ser **coherentes** con la realidad del negocio
- La **segmentaci√≥n** debe reflejar verdaderamente los ingresos
- Un buen an√°lisis SQL puede **salvar carreras** üòÑ

---

## üöÄ **PR√ìXIMOS DESAF√çOS**

### **üîÑ NIVEL 3: JOINS Y RELACIONES**
```sql
-- Pr√≥ximo desaf√≠o: Unir m√∫ltiples tablas
SELECT c.nombres, c.apellidos, c.ciudad,
       COUNT(cu.cuenta_id) as total_cuentas,
       SUM(p.monto) as total_prestamos
FROM clientes c
LEFT JOIN cuentas cu ON c.cliente_id = cu.cliente_id
LEFT JOIN prestamos p ON c.cliente_id = p.cliente_id
GROUP BY c.cliente_id, c.nombres, c.apellidos, c.ciudad;
```

### **üìä NIVEL 4: SUBCONSULTAS**
```sql
-- Subconsultas para an√°lisis complejos
SELECT ciudad, promedio_ciudad,
       (promedio_ciudad - promedio_general) as diferencia
FROM (
    SELECT ciudad, AVG(ingresos_mensuales) as promedio_ciudad
    FROM clientes GROUP BY ciudad
) sub
CROSS JOIN (
    SELECT AVG(ingresos_mensuales) as promedio_general 
    FROM clientes
) general;
```

### **üéØ NIVEL 5: WINDOW FUNCTIONS**
```sql
-- Funciones de ventana para rankings
SELECT nombres, apellidos, ciudad, ingresos_mensuales,
       ROW_NUMBER() OVER (PARTITION BY ciudad ORDER BY ingresos_mensuales DESC) as ranking_ciudad,
       PERCENT_RANK() OVER (ORDER BY ingresos_mensuales) as percentil
FROM clientes;
```

### **üèóÔ∏è NIVEL 6: CTEs Y CONSULTAS RECURSIVAS**
```sql
-- Common Table Expressions para l√≥gica compleja
WITH resumen_ciudad AS (
    SELECT ciudad, AVG(ingresos_mensuales) as promedio
    FROM clientes GROUP BY ciudad
),
clasificacion AS (
    SELECT ciudad, promedio,
           CASE WHEN promedio > 5000000 THEN 'Alto' ELSE 'Bajo' END as nivel
    FROM resumen_ciudad
)
SELECT * FROM clasificacion ORDER BY promedio DESC;
```

---

## üìö **TABLA DE EVOLUCI√ìN DE HABILIDADES**

| Nivel | Concepto | Estado | Pr√≥ximo Paso |
|-------|----------|--------|--------------|
| ‚≠ê | SELECT b√°sico | ‚úÖ DOMINADO | - |
| ‚≠ê | WHERE y filtros | ‚úÖ DOMINADO | - |
| ‚≠ê‚≠ê | GROUP BY | ‚úÖ DOMINADO | - |
| ‚≠ê‚≠ê | Funciones agregadas | ‚úÖ DOMINADO | - |
| ‚≠ê‚≠ê‚≠ê | CASE WHEN | ‚úÖ DOMINADO | - |
| ‚≠ê‚≠ê‚≠ê | C√°lculos complejos | ‚úÖ DOMINADO | - |
| ‚≠ê‚≠ê‚≠ê‚≠ê | JOINs | üîú PR√ìXIMO | Unir tablas |
| ‚≠ê‚≠ê‚≠ê‚≠ê | Subconsultas | üîú PR√ìXIMO | Queries anidadas |
| ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | Window Functions | üîú FUTURO | Rankings avanzados |
| ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | CTEs | üîú FUTURO | L√≥gica compleja |

---

## üèÜ **CERTIFICACI√ìN OFICIAL**

### **üéñÔ∏è SQL NINJA BANCARIO**
**Otorgado a:** Tu nombre  
**Fecha:** Julio 5, 2025  
**Nivel alcanzado:** AVANZADO ‚≠ê‚≠ê‚≠ê  

### **üìä Estad√≠sticas de Logros:**
- ‚úÖ **6 ejercicios avanzados** completados
- ‚úÖ **12+ conceptos SQL** dominados  
- ‚úÖ **20 clientes** analizados exitosamente
- ‚úÖ **5 ciudades** estudiadas estad√≠sticamente
- ‚úÖ **1 crisis laboral** evitada con SQL üòÑ
- ‚úÖ **0 errores** en consultas finales

### **üöÄ Habilidades Certificadas:**
- An√°lisis estad√≠stico con agregaciones
- Segmentaci√≥n din√°mica de clientes
- C√°lculos de porcentajes complejos
- Manipulaci√≥n de datos para presentaciones
- Resoluci√≥n creativa de problemas de negocio
- Personalizaci√≥n de terminolog√≠a empresarial

### **üíº Competencias Bancarias:**
- Identificaci√≥n de clientes VIP
- An√°lisis de mercados por ciudad
- Reportes ejecutivos con SQL
- Segmentaci√≥n para campa√±as de marketing
- An√°lisis de rentabilidad por segmento

---

## üéØ **PLAN DE ESTUDIO SUGERIDO**

### **üìÖ Semana 1-2: Consolidaci√≥n**
- [ ] Practicar todas las consultas avanzadas
- [ ] Crear variaciones de los ejercicios
- [ ] Explorar otros campos de la tabla clientes

### **üìÖ Semana 3-4: JOINs**
- [ ] INNER JOIN con tabla cuentas
- [ ] LEFT JOIN con prestamos
- [ ] An√°lisis multi-tabla

### **üìÖ Semana 5-6: Subconsultas**
- [ ] Subconsultas en SELECT
- [ ] Subconsultas en WHERE  
- [ ] EXISTS y NOT EXISTS

### **üìÖ Semana 7-8: Funciones Avanzadas**
- [ ] Window functions
- [ ] CTEs (Common Table Expressions)
- [ ] Funciones de fecha y tiempo

---

## üí° **TIPS PARA MANTENER EL NIVEL NINJA**

### **üî• Pr√°ctica Diaria**
- Ejecuta al menos 1 consulta SQL avanzada por d√≠a
- Experimenta con diferentes combinaciones de funciones
- Busca siempre nuevas formas de resolver el mismo problema

### **üìö Recursos Recomendados**
- Practicar con datasets m√°s grandes
- Explorar otras tablas de la base de datos bancaria
- Crear tus propios ejercicios de negocio

### **üéØ Objetivos a Corto Plazo**
1. Dominar JOINs entre 3+ tablas
2. Crear reportes ejecutivos complejos
3. Implementar an√°lisis de series temporales
4. Desarrollar dashboards con SQL

---

## üéâ **¬°FELICITACIONES NINJA!**

Has completado exitosamente el programa **SQL BANCARIO AVANZADO** y demostrado habilidades de nivel profesional. Tu capacidad para resolver problemas complejos, crear consultas elegantes y hasta "salvar el trabajo" con an√°lisis inteligente te convierte en un verdadero **SQL NINJA**.

### **üåü Lo Que Te Distingue:**
- **Creatividad**: "Clase Media Jodida" - Personalizaci√≥n aut√©ntica
- **Precisi√≥n**: Cero errores en consultas complejas
- **Resoluci√≥n**: Identificaste y solucionaste inconsistencias de datos
- **Profesionalismo**: Resultados presentables para directivos

### **üöÄ Est√°s Listo Para:**
- An√°lisis de datos bancarios complejos
- Reportes ejecutivos con insights valiosos
- Segmentaci√≥n avanzada de clientes
- Operaciones de rescate de datos üòÑ
- Liderar proyectos de an√°lisis SQL

---

**üéØ Siguiente aventura:** ¬°JOINs y relaciones entre tablas!  
**üí™ Nivel actual:** SQL NINJA BANCARIO CERTIFICADO

**¬°Que la fuerza del SQL te acompa√±e siempre! üöÄüí∞**

---

*üìù Documento generado autom√°ticamente*  
*üìÖ Fecha: Julio 5, 2025*  
*üéñÔ∏è Certificaci√≥n: SQL NINJA BANCARIO*
